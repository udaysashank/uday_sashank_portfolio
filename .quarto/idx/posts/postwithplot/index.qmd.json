{"title":"TidyTuesday: Retail Sales data analysis with Plotly in R","markdown":{"yaml":{"title":"TidyTuesday: Retail Sales data analysis with Plotly in R","date":"01-2-2023","author":"Uday Sashank Kanapala","categories":["code","analysis","visualization","plotly"],"image":"b.jpg"},"headingText":"Load necessary libraries","containsRefs":false,"markdown":"\n\nIn this TidyTuesday analysis, I explored retail sales data using R and leveraged the power of Plotly for interactive visualizations. The dataset, likely sourced from the TidyTuesday project, was loaded and examined to gain insights into retail trends. Plotly, a dynamic plotting library, was employed to create engaging and interactive charts, allowing for a deeper understanding of sales patterns, seasonality, or any trends within the retail sector. This approach not only facilitates exploration but also enhances the communicative aspect of data findings through visually appealing and interactive plots.\n\n```{r}\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(gplots)\nlibrary(caret)\nlibrary(randomForest)\nlibrary(e1071)\n\n# Load the Walmart data\nWalmart <-  read.csv(\"C:/Users/P/Downloads/Walmart.csv\")\n\n# Data Cleanup\n# Convert Date column to Date format\nWalmart$Date <- as.Date(Walmart$Date)\n\n# Feature Engineering\n# Extract Year, Month, and Day from Date\nWalmart$Year <- format(Walmart$Date, \"%Y\")\nWalmart$Month <- format(Walmart$Date, \"%m\")\nWalmart$Day <- format(Walmart$Date, \"%d\")\n\n# Exploratory Data Analysis (EDA)\n\n# Display the first few rows of the dataset\nhead(Walmart)\n\n# Summary statistics\nsummary(Walmart)\n\n# Distribution plot for Weekly Sales\nggplot(Walmart, aes(x = Weekly_Sales)) +\n  geom_histogram(binwidth = 5000, fill = \"#4CAF50\", color = \"#2E7D32\", alpha = 0.7) +\n  labs(title = \"Distribution of Weekly Sales\",\n       x = \"Weekly Sales\", y = \"Frequency\") +\n  theme_minimal()\n\n# Boxplot for Weekly Sales by Store\nggplot(Walmart, aes(x = Store, y = Weekly_Sales)) +\n  geom_boxplot(fill = \"#FF4081\", alpha = 0.7) +\n  labs(title = \"Boxplot of Weekly Sales by Store\",\n       x = \"Store\", y = \"Weekly Sales\") +\n  theme_minimal()\n\n# Scatter plot for Weekly Sales and Temperature\nggplot(Walmart, aes(x = Temperature, y = Weekly_Sales)) +\n  geom_point(color = \"#1976D2\", alpha = 0.7) +\n  labs(title = \"Scatter Plot of Weekly Sales vs Temperature\",\n       x = \"Temperature\", y = \"Weekly Sales\") +\n  theme_minimal()\n\n# Quartile plot\nquartile_data <- Walmart %>%\n  group_by(Date) %>%\n  summarise(Q1 = quantile(Weekly_Sales, 0.25),\n            Q3 = quantile(Weekly_Sales, 0.75))\n\nggplot(quartile_data, aes(x = Date)) +\n  geom_line(aes(y = Q1), color = \"#673AB7\", linetype = \"dashed\") +\n  geom_line(aes(y = Q3), color = \"#673AB7\", linetype = \"dashed\") +\n  labs(title = \"Quartile Sales Over Time\",\n       x = \"Date\", y = \"Weekly Sales\",\n       color = \"Quartile\") +\n  theme_minimal()\n\n# Model Evaluation\n# Split the data into training and testing sets\nset.seed(123)\ntrain_indices <- createDataPartition(Walmart$Weekly_Sales, p = 0.7, list = FALSE)\ntrainData <- Walmart[train_indices, ]\ntestData <- Walmart[-train_indices, ]\n\n# Evaluate the linear regression model\nlm_model <- lm(Weekly_Sales ~ Temperature + Fuel_Price + CPI + Unemployment + Holiday_Flag, data = trainData)\nlm_predictions <- predict(lm_model, newdata = testData)\nlm_r2 <- cor(lm_predictions, testData$Weekly_Sales)^2\nlm_rmse <- sqrt(mean((lm_predictions - testData$Weekly_Sales)^2))\n\n# Evaluate the random forest model\nrf_model <- randomForest(Weekly_Sales ~ Temperature + Fuel_Price + CPI + Unemployment + Holiday_Flag, data = trainData)\nrf_predictions <- predict(rf_model, newdata = testData)\nrf_r2 <- cor(rf_predictions, testData$Weekly_Sales)^2\nrf_rmse <- sqrt(mean((rf_predictions - testData$Weekly_Sales)^2))\n\ncat(\"Linear Regression Model:\\n\")\ncat(\"R-squared:\", lm_r2, \"\\n\")\ncat(\"RMSE:\", lm_rmse, \"\\n\\n\")\n\ncat(\"Random Forest Model:\\n\")\ncat(\"R-squared:\", rf_r2, \"\\n\")\ncat(\"RMSE:\", rf_rmse, \"\\n\")\n\n```\n\nThe linear regression model achieved a relatively low R-squared value of 0.0155, indicating that the model explains only a small proportion of the variance in the weekly sales. Additionally, the Root Mean Squared Error (RMSE) of 553,801.7 suggests a significant deviation between the predicted and actual sales values, emphasizing the limitations of the linear model in capturing the underlying patterns in the data.\n\nOn the other hand, the Random Forest model exhibited better performance with a higher R-squared value of 0.1402, signifying a greater ability to explain variability in weekly sales. The lower RMSE of 521,092.6 further supports the Random Forest model as a more accurate predictor compared to the linear regression model. This suggests that the Random Forest algorithm, which leverages ensemble learning and decision trees, provides a more robust and flexible approach for capturing the complex relationships within the Walmart sales data set.\n","srcMarkdownNoYaml":"\n\nIn this TidyTuesday analysis, I explored retail sales data using R and leveraged the power of Plotly for interactive visualizations. The dataset, likely sourced from the TidyTuesday project, was loaded and examined to gain insights into retail trends. Plotly, a dynamic plotting library, was employed to create engaging and interactive charts, allowing for a deeper understanding of sales patterns, seasonality, or any trends within the retail sector. This approach not only facilitates exploration but also enhances the communicative aspect of data findings through visually appealing and interactive plots.\n\n```{r}\n# Load necessary libraries\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(gplots)\nlibrary(caret)\nlibrary(randomForest)\nlibrary(e1071)\n\n# Load the Walmart data\nWalmart <-  read.csv(\"C:/Users/P/Downloads/Walmart.csv\")\n\n# Data Cleanup\n# Convert Date column to Date format\nWalmart$Date <- as.Date(Walmart$Date)\n\n# Feature Engineering\n# Extract Year, Month, and Day from Date\nWalmart$Year <- format(Walmart$Date, \"%Y\")\nWalmart$Month <- format(Walmart$Date, \"%m\")\nWalmart$Day <- format(Walmart$Date, \"%d\")\n\n# Exploratory Data Analysis (EDA)\n\n# Display the first few rows of the dataset\nhead(Walmart)\n\n# Summary statistics\nsummary(Walmart)\n\n# Distribution plot for Weekly Sales\nggplot(Walmart, aes(x = Weekly_Sales)) +\n  geom_histogram(binwidth = 5000, fill = \"#4CAF50\", color = \"#2E7D32\", alpha = 0.7) +\n  labs(title = \"Distribution of Weekly Sales\",\n       x = \"Weekly Sales\", y = \"Frequency\") +\n  theme_minimal()\n\n# Boxplot for Weekly Sales by Store\nggplot(Walmart, aes(x = Store, y = Weekly_Sales)) +\n  geom_boxplot(fill = \"#FF4081\", alpha = 0.7) +\n  labs(title = \"Boxplot of Weekly Sales by Store\",\n       x = \"Store\", y = \"Weekly Sales\") +\n  theme_minimal()\n\n# Scatter plot for Weekly Sales and Temperature\nggplot(Walmart, aes(x = Temperature, y = Weekly_Sales)) +\n  geom_point(color = \"#1976D2\", alpha = 0.7) +\n  labs(title = \"Scatter Plot of Weekly Sales vs Temperature\",\n       x = \"Temperature\", y = \"Weekly Sales\") +\n  theme_minimal()\n\n# Quartile plot\nquartile_data <- Walmart %>%\n  group_by(Date) %>%\n  summarise(Q1 = quantile(Weekly_Sales, 0.25),\n            Q3 = quantile(Weekly_Sales, 0.75))\n\nggplot(quartile_data, aes(x = Date)) +\n  geom_line(aes(y = Q1), color = \"#673AB7\", linetype = \"dashed\") +\n  geom_line(aes(y = Q3), color = \"#673AB7\", linetype = \"dashed\") +\n  labs(title = \"Quartile Sales Over Time\",\n       x = \"Date\", y = \"Weekly Sales\",\n       color = \"Quartile\") +\n  theme_minimal()\n\n# Model Evaluation\n# Split the data into training and testing sets\nset.seed(123)\ntrain_indices <- createDataPartition(Walmart$Weekly_Sales, p = 0.7, list = FALSE)\ntrainData <- Walmart[train_indices, ]\ntestData <- Walmart[-train_indices, ]\n\n# Evaluate the linear regression model\nlm_model <- lm(Weekly_Sales ~ Temperature + Fuel_Price + CPI + Unemployment + Holiday_Flag, data = trainData)\nlm_predictions <- predict(lm_model, newdata = testData)\nlm_r2 <- cor(lm_predictions, testData$Weekly_Sales)^2\nlm_rmse <- sqrt(mean((lm_predictions - testData$Weekly_Sales)^2))\n\n# Evaluate the random forest model\nrf_model <- randomForest(Weekly_Sales ~ Temperature + Fuel_Price + CPI + Unemployment + Holiday_Flag, data = trainData)\nrf_predictions <- predict(rf_model, newdata = testData)\nrf_r2 <- cor(rf_predictions, testData$Weekly_Sales)^2\nrf_rmse <- sqrt(mean((rf_predictions - testData$Weekly_Sales)^2))\n\ncat(\"Linear Regression Model:\\n\")\ncat(\"R-squared:\", lm_r2, \"\\n\")\ncat(\"RMSE:\", lm_rmse, \"\\n\\n\")\n\ncat(\"Random Forest Model:\\n\")\ncat(\"R-squared:\", rf_r2, \"\\n\")\ncat(\"RMSE:\", rf_rmse, \"\\n\")\n\n```\n\nThe linear regression model achieved a relatively low R-squared value of 0.0155, indicating that the model explains only a small proportion of the variance in the weekly sales. Additionally, the Root Mean Squared Error (RMSE) of 553,801.7 suggests a significant deviation between the predicted and actual sales values, emphasizing the limitations of the linear model in capturing the underlying patterns in the data.\n\nOn the other hand, the Random Forest model exhibited better performance with a higher R-squared value of 0.1402, signifying a greater ability to explain variability in weekly sales. The lower RMSE of 521,092.6 further supports the Random Forest model as a more accurate predictor compared to the linear regression model. This suggests that the Random Forest algorithm, which leverages ensemble learning and decision trees, provides a more robust and flexible approach for capturing the complex relationships within the Walmart sales data set.\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","highlight-style":"github","output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.353","editor":"visual","theme":{"light":"lux","dark":["quartz","../../theme_dark_custom.scss"]},"title-block-banner":true,"title":"TidyTuesday: Retail Sales data analysis with Plotly in R","date":"01-2-2023","author":"Uday Sashank Kanapala","categories":["code","analysis","visualization","plotly"],"image":"b.jpg"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}